#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)

	СтррКонтекст = Новый Структура("Местоположение");
	ТекОбъект = РеквизитФормыВЗначение("Объект");		
	ТекОбъект.КонтекстФормыИнициализировать(СтррКонтекст, Параметры); 
	СтррКонтекст.Местоположение = ТекОбъект.ПрочитатьЗначениеНастройки("МестоположениеДляИнформера");
	
КонецПроцедуры

// ОбработчикиСобытийФормы
#КонецОбласти

#Область ОбработчикиСобытийЭлементовШапкиФормы

&НаКлиенте
Процедура ДекорацияОписаниеОбработкаНавигационнойСсылки(Элемент, НавигационнаяСсылка, СтандартнаяОбработка)

	Если НавигационнаяСсылка = "mailto" Тогда
		СтандартнаяОбработка = Ложь;
		//@skip-check use-non-recommended-method
		СтрГород = ПолучитьФорму(СтррКонтекст.ПутьКФорме + "МодульКарты", СтррКонтекст).ГородМестоположения(СтррКонтекст.Местоположение);
		//@skip-check use-non-recommended-method
		СтрКлюч = " (" + ?(ЗначениеЗаполнено(СтрГород), СтрГород + ", ", "") + ТекущаяДата() + ")";
		ЗапуститьПриложение("mailto:mail@agentplus.ru?subject=Доступ в Личный кабинет" + СтрКлюч);
	КонецЕсли; 
	
КонецПроцедуры

// ОбработчикиСобытийЭлементовШапкиФормы
#КонецОбласти
