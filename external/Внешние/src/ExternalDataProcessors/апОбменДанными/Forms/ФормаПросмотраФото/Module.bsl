#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	ТекОбъект = РеквизитФормыВЗначение("Отчет");
	
	Настройки = ТекОбъект.ПрочитатьЗначенияНастроек("КаталогДанных");

	ПодкаталогФотграфий = ТекОбъект.ПодкаталогДанных("Фотографии",Настройки.КаталогДанных);	
	
	//@skip-check wrong-string-literal-content
	ДанныеФото = ТекОбъект.ПолучитьОбъектИзХранилища("СпрФото", Параметры["ID"]);
	ХранимыйФайл = ПодкаталогФотграфий + ДанныеФото.ХранимыйФайл;	
	ОписаниеФото = ДанныеФото.Описание;
	
	Если Параметры.Свойство("Наименование") Тогда
		//@skip-check module-self-reference
		//@skip-check wrong-string-literal-content
		ЭтотОбъект.Заголовок = Параметры["Наименование"];
	Иначе
		//@skip-check module-self-reference
		ЭтотОбъект.Заголовок = "Просмотр фото";
	КонецЕсли;	
	
КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	
	Оповещение  =  Новый ОписаниеОповещения("ОбработатьВыборФайла",   ЭтотОбъект);
	//@skip-check form-self-reference
	//@skip-check object-deprecated
	НачатьПомещениеФайла(Оповещение,АдресКартинки,ХранимыйФайл, Ложь, ЭтаФорма.УникальныйИдентификатор);
	
КонецПроцедуры

// ОбработчикиСобытийФормы
#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура ОткрытьПриложение(Команда)
	
	ЗапуститьПриложение(ХранимыйФайл);	
	
КонецПроцедуры

// ОбработчикиКомандФормы
#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаКлиенте
Процедура ОбработатьВыборФайла(Результат, Адрес, ВыбранноеИмяФайла, ДополнительныеПараметры) Экспорт
	
	Если Результат Тогда
		
		Файл = Новый Файл(ВыбранноеИмяФайла);
		
		Если Файл.Существует() Тогда
						
			АдресКартинки = Адрес;
			
		КонецЕсли;
		
	КонецЕсли;
	
КонецПроцедуры

// СлужебныеПроцедурыИФункции
#КонецОбласти
